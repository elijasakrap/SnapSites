<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnapSites</title>
    <!-- Use Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Dark background */
            color: #c9d1d9; /* Light text */
        }
        /* Custom styles for glowing effect on cards if desired */
        .card-glow:hover {
            box-shadow: 0 0 15px rgba(255, 69, 0, 0.5), 0 0 30px rgba(255, 69, 0, 0.3);
            transition: box-shadow 0.3s ease-in-out;
        }
        /* Style for the message box */
        #messageBox, #loadingBox {
            display: none;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem 2rem;
            background-color: #28a745;
            color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        #loadingBox {
            background-color: #4a5568;
        }
        .portfolio-card {
            background-color: #161b22;
            padding: 2rem;
            border-radius: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .portfolio-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .logo-image {
            max-height: 40px; /* Adjust height as needed */
            width: auto;
        }
        .logo-svg {
            height: 40px;
            width: auto;
        }
    </style>
</head>
<body>

<!-- Message Box -->
<div id="messageBox" class="rounded-xl">
    Thank you for your message! We'll be in touch soon.
</div>

<!-- Loading Box -->
<div id="loadingBox" class="rounded-xl">
    Generating your website...
</div>

<!-- Header -->
<header class="bg-slate-900 sticky top-0 z-50 shadow-lg">
    <div class="container mx-auto flex flex-col md:flex-row items-center justify-between p-4">
        <!-- SVG Logo -->
        <a href="#" class="flex items-center space-x-3 text-white text-2xl font-bold group">
            <!-- New, modern lightning bolt logo -->
            <svg class="logo-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.6061 2.54413L4.23608 13.6341H12.3061L9.63608 21.4541L19.7561 10.3641H11.6861L14.6061 2.54413Z" stroke="#EB5757" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="text-white text-2xl font-bold" data-translate="siteName">SnapSites</span>
        </a>
        <!-- Navigation Links -->
        <div class="flex items-center mt-4 md:mt-0">
            <nav>
                <ul class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-8 text-sm font-semibold">
                    <li><a href="#hero" class="hover:text-red-500 transition-colors" data-translate="navHome">Home</a></li>
                    <li><a href="#services" class="hover:text-red-500 transition-colors" data-translate="navServices">Services</a></li>
                    <li><a href="#portfolio" class="hover:text-red-500 transition-colors" data-translate="navPortfolio">Portfolio</a></li>
                    <li><a href="#custom-website" class="hover:text-red-500 transition-colors" data-translate="navCustom">Custom Website</a></li>
                    <li><a href="#contact" class="hover:text-red-500 transition-colors" data-translate="navContact">Contact</a></li>
                </ul>
            </nav>
            <!-- Translation Button -->
            <button id="translate-button" class="ml-8 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors">
                HR
            </button>
        </div>
    </div>
</header>

<main class="container mx-auto px-4">

    <!-- Hero Section -->
    <section id="hero" class="text-center py-24 md:py-36">
        <h1 class="text-4xl md:text-6xl font-extrabold leading-tight tracking-tight text-white" data-translate="heroTitle">
            Your Website,<br class="hidden md:inline"> In a Snap.
        </h1>
        <p class="mt-6 md:text-xl text-slate-400 max-w-2xl mx-auto" data-translate="heroSubtitle">
            We build beautiful, blazing-fast, and effective websites that get results for your business.
        </p>
        <div class="mt-10">
            <a href="#contact" class="inline-block bg-red-600 text-white font-bold py-3 px-8 rounded-xl hover:bg-red-700 transition-colors shadow-lg" data-translate="getStartedButton">
                Get Started
            </a>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-16">
        <h2 class="text-3xl md:text-4xl font-bold text-center text-white mb-12" data-translate="servicesTitle">What We Do</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
            <!-- Service Card 1 -->
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg border border-slate-700 card-glow">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4">
                    <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z"/>
                </svg>
                <h3 class="text-xl font-semibold text-white" data-translate="service1Title">Blazing Fast Development</h3>
                <p class="mt-4 text-slate-400" data-translate="service1Desc">
                    We build websites with clean, optimized code for lightning-fast load times.
                </p>
            </div>
            <!-- Service Card 2 -->
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg border border-slate-700 card-glow">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>
                </svg>
                <h3 class="text-xl font-semibold text-white" data-translate="service2Title">Stunning Responsive Design</h3>
                <p class="mt-4 text-slate-400" data-translate="service2Desc">
                    Your site will look and function perfectly on any device, from desktop to mobile.
                </p>
            </div>
            <!-- Service Card 3 -->
            <div class="bg-slate-800 p-8 rounded-xl shadow-lg border border-slate-700 card-glow">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                </svg>
                <h3 class="text-xl font-semibold text-white" data-translate="service3Title">SEO & Analytics</h3>
                <p class="mt-4 text-slate-400" data-translate="service3Desc">
                    We help you get found online and understand your visitors with powerful data.
                </p>
            </div>
        </div>
    </section>

    <!-- Portfolio Section -->
    <section id="portfolio" class="py-16">
        <h2 class="text-3xl md:text-4xl font-bold text-center text-white mb-12" data-translate="portfolioTitle">Our Work</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Portfolio Item 1 -->
            <div class="group portfolio-card">
                <img id="portfolio-img-1" src="https://placehold.co/800x600/f56565/FFFFFF?text=E-commerce+Redesign" alt="Project 1" class="w-full h-48 object-cover rounded-lg shadow-md mb-4">
                <div class="p-2">
                    <h3 class="text-2xl font-semibold text-white mb-1" data-translate="portfolio1Title">E-commerce Redesign</h3>
                    <p class="text-slate-400 text-base" data-translate="portfolio1Desc">
                        A clean, modern e-commerce site focused on user experience and fast checkout.
                    </p>
                </div>
            </div>
            <!-- Portfolio Item 2 -->
            <div class="group portfolio-card">
                <img src="https://placehold.co/800x600/f56565/FFFFFF?text=Local+Business+Site" alt="Project 2" class="w-full h-48 object-cover rounded-lg shadow-md mb-4">
                <div class="p-2">
                    <h3 class="text-2xl font-semibold text-white mb-1" data-translate="portfolio2Title">Local Business Site</h3>
                    <p class="text-slate-400 text-base" data-translate="portfolio2Desc">
                        A simple, yet elegant website for a local cafe, with menu and location details.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Custom Website Generator Section -->
    <section id="custom-website" class="py-16">
        <h2 class="text-3xl md:text-4xl font-bold text-center text-white mb-12" data-translate="customWebsiteTitle">Generate Your Custom Website</h2>
        <div class="max-w-3xl mx-auto space-y-6 bg-slate-800 p-8 rounded-xl shadow-lg border border-slate-700">
            <p class="text-center text-slate-400" data-translate="customWebsiteDesc">Describe the website you want, and we'll generate the code for you!</p>
            <div>
                <label for="website-description" class="block text-sm font-medium text-slate-400" data-translate="websiteDescriptionLabel">Website Description</label>
                <textarea id="website-description" name="website-description" rows="4" placeholder="e.g., A minimalist website for a freelance graphic designer with a portfolio section and a contact form." required class="mt-1 block w-full rounded-md bg-slate-700 border-slate-600 shadow-sm text-white px-3 py-2 focus:border-red-500 focus:ring-red-500"></textarea>
            </div>
            <div class="text-center">
                <button type="button" id="generate-website-button" class="w-full bg-red-600 text-white font-bold py-3 px-8 rounded-xl hover:bg-red-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" data-translate="generateWebsiteButton">
                    Generate My Website
                </button>
            </div>
            <div id="generated-code-container" class="mt-8 hidden">
                <h3 class="text-xl font-semibold text-white mb-4" data-translate="generatedCodeTitle">Generated Code:</h3>
                <textarea id="generated-code" class="w-full h-96 text-sm bg-black text-white p-4 rounded-xl border border-gray-700"></textarea>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16">
        <h2 class="text-3xl md:text-4xl font-bold text-center text-white mb-12" data-translate="contactTitle">Let's Build Something Great</h2>
        <form id="contactForm" class="max-w-xl mx-auto space-y-6 bg-slate-800 p-8 rounded-xl shadow-lg border border-slate-700">
            <div>
                <label for="name" class="block text-sm font-medium text-slate-400" data-translate="contactNameLabel">Name</label>
                <input type="text" id="name" name="name" required class="mt-1 block w-full rounded-md bg-slate-700 border-slate-600 shadow-sm text-white px-3 py-2 focus:border-red-500 focus:ring-red-500">
            </div>
            <div>
                <label for="email" class="block text-sm font-medium text-slate-400" data-translate="contactEmailLabel">Email</label>
                <input type="email" id="email" name="email" required class="mt-1 block w-full rounded-md bg-slate-700 border-slate-600 shadow-sm text-white px-3 py-2 focus:border-red-500 focus:ring-red-500">
            </div>
            <div>
                <label for="message" class="block text-sm font-medium text-slate-400" data-translate="contactMessageLabel">Message</label>
                <textarea id="message" name="message" rows="4" required class="mt-1 block w-full rounded-md bg-slate-700 border-slate-600 shadow-sm text-white px-3 py-2 focus:border-red-500 focus:ring-red-500"></textarea>
            </div>
            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                <button type="button" id="generate-brief-button" class="flex-1 bg-red-600 text-white font-bold py-3 px-8 rounded-xl hover:bg-red-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" data-translate="generateBriefButton">
                    ✨ Generate Project Brief
                </button>
                <button type="submit" class="flex-1 bg-gray-600 text-white font-bold py-3 px-8 rounded-xl hover:bg-gray-700 transition-colors shadow-lg" data-translate="sendMessageButton">
                    Send Message
                </button>
            </div>
        </form>
    </section>

</main>

<!-- Footer -->
<footer class="bg-slate-900 py-8 mt-16 text-center text-slate-400 border-t border-slate-800">
    <div class="container mx-auto px-4">
        <p data-translate="footerText">&copy; 2024 SnapSites. All rights reserved.</p>
        <div class="mt-4 flex justify-center space-x-6">
            <a href="#" class="hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22.049 4.316c-.85.378-1.74.63-2.67.75A4.673 4.673 0 0 0 21.6 2.5a.6.6 0 0 0-.6-1.5c-1.14.54-2.39 1.14-3.69 1.8a4.83 4.83 0 0 0-8.23-2.92C5.9 1.48 4.2 2.78 3.32 4.4c-.9.9-1.35 2.1-1.35 3.5s.45 2.6 1.35 3.5c.92.92 2.14 1.38 3.65 1.38 1.13 0 2.22-.3 3.1-.9.18-.12.33-.27.46-.42a.6.6 0 0 0-.08-.85c-.3-.22-.6-.4-.93-.56-1.36-.67-2.9-1.02-4.5-1.02-1.9 0-3.6.48-5.1.48l-.05-.08c.55 1.25 1.48 2.37 2.76 3.4 1.6 1.3 3.62 1.95 6.05 1.95 2.5 0 4.7-.63 6.6-1.9a1.9 1.9 0 0 0 1.25-1.7c0-.28-.08-.55-.22-.8a.6.6 0 0 0-.6-.35c-1.4.3-2.8.45-4.2.45-2.2 0-4.2-.6-5.85-1.8a7.2 7.2 0 0 1-2.9-4.8c-.24-.9-.36-1.83-.36-2.8s.12-1.9.36-2.8c.42-1.7 1.38-3.15 2.76-4.35 1.7-.9 3.6-1.35 5.7-1.35 2.1 0 4.2.6 5.8 1.8.9.6 1.63 1.38 2.2 2.28 1.1 1.7 1.65 3.6 1.65 5.6s-.55 3.9-1.65 5.6a14 14 0 0 1-2.2 2.28c-.8.6-1.7.9-2.6.9a.6.6 0 0 0-.58.62c0 .2.05.4.16.58.55 1 1.25 1.83 2.1 2.5c1.4.92 3.03 1.38 4.9 1.38a.6.6 0 0 0 .58-.62c0-.22-.05-.42-.16-.58z"/></svg>
            </a>
            <a href="#" class="hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37a4 4 0 1 1-6.19-3.83L11.75 12h-2.5a4 4 0 1 1 0-8h2.5L11.75 8h2.5a4 4 0 1 1 0 8H11.75l-2.5-4h2.5zm-5 4a.5.5 0 1 0 0 1 .5.5 0 0 0 0-1z"/></svg>
            </a>
            <a href="#" class="hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 0-6 6v7h-4v-7a6 6 0 0 0-6-6v7h-4v-7a6 6 0 0 0-6-6h-.5zm-4-4a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"/></svg>
            </a>
        </div>
    </div>
</footer>

<script>
    // --- TRANSLATION LOGIC ---
    const translations = {
        en: {
            siteName: "SnapSites",
            navHome: "Home",
            navServices: "Services",
            navPortfolio: "Portfolio",
            navCustom: "Custom Website",
            navContact: "Contact",
            heroTitle: "Your Website,<br> In a Snap.",
            heroSubtitle: "We build beautiful, blazing-fast, and effective websites that get results for your business.",
            getStartedButton: "Get Started",
            servicesTitle: "What We Do",
            service1Title: "Blazing Fast Development",
            service1Desc: "We build websites with clean, optimized code for lightning-fast load times.",
            service2Title: "Stunning Responsive Design",
            service2Desc: "Your site will look and function perfectly on any device, from desktop to mobile.",
            service3Title: "SEO & Analytics",
            service3Desc: "We help you get found online and understand your visitors with powerful data.",
            portfolioTitle: "Our Work",
            portfolio1Title: "E-commerce Redesign",
            portfolio1Desc: "A clean, modern e-commerce site focused on user experience and fast checkout.",
            portfolio2Title: "Local Business Site",
            portfolio2Desc: "A simple, yet elegant website for a local cafe, with menu and location details.",
            customWebsiteTitle: "Generate Your Custom Website",
            customWebsiteDesc: "Describe the website you want, and we'll generate the code for you!",
            websiteDescriptionLabel: "Website Description",
            generateWebsiteButton: "Generate My Website",
            generatedCodeTitle: "Generated Code:",
            contactTitle: "Let's Build Something Great",
            contactNameLabel: "Name",
            contactEmailLabel: "Email",
            contactMessageLabel: "Message",
            generateBriefButton: "✨ Generate Project Brief",
            sendMessageButton: "Send Message",
            footerText: "&copy; 2024 SnapSites. All rights reserved."
        },
        hr: {
            siteName: "SnapSites",
            navHome: "Početna",
            navServices: "Usluge",
            navPortfolio: "Portfelj",
            navCustom: "Prilagođena Web Stranica",
            navContact: "Kontakt",
            heroTitle: "Vaša Web Stranica,<br> U Trenu.",
            heroSubtitle: "Izrađujemo prekrasne, iznimno brze i učinkovite web stranice koje donose rezultate vašem poslovanju.",
            getStartedButton: "Započnite",
            servicesTitle: "Što Radimo",
            service1Title: "Munjevito Brza Izrada",
            service1Desc: "Izrađujemo web stranice s čistim, optimiziranim kodom za munjevito brzo učitavanje.",
            service2Title: "Zapanjujući Responzivni Dizajn",
            service2Desc: "Vaša stranica će izgledati i funkcionirati savršeno na svakom uređaju, od računala do mobitela.",
            service3Title: "SEO i Analitika",
            service3Desc: "Pomažemo vam da vas pronađu online i razumijete svoje posjetitelje pomoću moćnih podataka.",
            portfolioTitle: "Naš Rad",
            portfolio1Title: "Redizajn E-trgovine",
            portfolio1Desc: "Čista, moderna stranica za e-trgovinu usmjerena na korisničko iskustvo i brzu naplatu.",
            portfolio2Title: "Stranica za Lokalno Poslovanje",
            portfolio2Desc: "Jednostavna, ali elegantna web stranica za lokalni kafić, s jelovnikom i podacima o lokaciji.",
            customWebsiteTitle: "Generirajte Svoju Prilagođenu Web Stranicu",
            customWebsiteDesc: "Opišite web stranicu koju želite, a mi ćemo generirati kod za vas!",
            websiteDescriptionLabel: "Opis Web Stranice",
            generateWebsiteButton: "Generiraj Moju Web Stranicu",
            generatedCodeTitle: "Generirani Kod:",
            contactTitle: "Izgradimo Nešto Sjajno",
            contactNameLabel: "Ime",
            contactEmailLabel: "Email",
            contactMessageLabel: "Poruka",
            generateBriefButton: "✨ Generiraj Sažetak Projekta",
            sendMessageButton: "Pošalji Poruku",
            footerText: "&copy; 2024 SnapSites. Sva prava pridržana."
        }
    };

    let currentLanguage = 'en';
    const translateButton = document.getElementById('translate-button');

    function setLanguage(lang) {
        const elements = document.querySelectorAll('[data-translate]');
        elements.forEach(el => {
            const key = el.getAttribute('data-translate');
            if (translations[lang][key]) {
                el.innerHTML = translations[lang][key];
            }
        });
        document.documentElement.lang = lang;
        currentLanguage = lang;
        translateButton.textContent = lang === 'en' ? 'HR' : 'EN';
    }

    translateButton.addEventListener('click', () => {
        const newLang = currentLanguage === 'en' ? 'hr' : 'en';
        setLanguage(newLang);
    });
    // --- END TRANSLATION LOGIC ---

    document.getElementById('contactForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const form = event.target;
        const nameInput = form.querySelector('#name');
        const emailInput = form.querySelector('#email');
        const messageInput = form.querySelector('#message');

        if (nameInput.value.trim() === '' || emailInput.value.trim() === '' || messageInput.value.trim() === '') {
            return;
        }
        
        console.log('Form Submitted!');
        console.log('Name:', nameInput.value);
        console.log('Email:', emailInput.value);
        console.log('Message:', messageInput.value);

        const messageBox = document.getElementById('messageBox');
        messageBox.style.display = 'block';
        setTimeout(() => {
            messageBox.style.display = 'none';
        }, 3000);
        form.reset();
    });

    document.getElementById('generate-brief-button').addEventListener('click', async function() {
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const messageInput = document.getElementById('message');
        const button = this;

        if (messageInput.value.trim() === '') {
            messageInput.placeholder = 'Please enter a brief message first.';
            messageInput.focus();
            return;
        }

        button.disabled = true;
        const originalText = button.innerHTML;
        button.innerHTML = 'Generating...';

        const prompt = `Act as a professional marketing assistant for a web development company called SnapSites. A potential client named ${name || 'an anonymous user'} with the email ${email || 'no email provided'} has sent the following initial message about their project: "${messageInput.value}". Your task is to expand this into a more detailed and structured project brief. The brief should be a single paragraph that includes a title, a description of the client's needs, and an example of a potential solution. Use a professional and friendly tone.`;
        
        const payload = {
            contents: [{ parts: [{ text: prompt }] }],
            generationConfig: {
              responseMimeType: "text/plain",
            }
        };

        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
        let retries = 0;
        const maxRetries = 5;
        const retryDelay = 1000;

        const callApiWithExponentialBackoff = async () => {
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    if (response.status === 429 && retries < maxRetries) {
                        const delay = retryDelay * Math.pow(2, retries);
                        console.warn(`Rate limit exceeded. Retrying in ${delay}ms...`);
                        await new Promise(resolve => setTimeout(resolve, delay));
                        retries++;
                        return callApiWithExponentialBackoff();
                    } else {
                        throw new Error(`API call failed with status: ${response.status}`);
                    }
                }

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                    messageInput.value = result.candidates[0].content.parts[0].text;
                } else {
                    messageInput.value = "Sorry, I couldn't generate a brief. Please try again or type your message manually.";
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                messageInput.value = "Sorry, there was an error. Please try again or type your message manually.";
            } finally {
                button.innerHTML = originalText;
                button.disabled = false;
            }
        };
        callApiWithExponentialBackoff();
    });

    document.getElementById('generate-website-button').addEventListener('click', async function() {
        const descriptionInput = document.getElementById('website-description');
        const generatedCodeContainer = document.getElementById('generated-code-container');
        const generatedCode = document.getElementById('generated-code');
        const button = this;

        if (descriptionInput.value.trim() === '') {
            descriptionInput.placeholder = 'Please describe the website you want to generate.';
            descriptionInput.focus();
            return;
        }

        button.disabled = true;
        const originalText = button.innerHTML;
        button.innerHTML = 'Generating...';
        document.getElementById('loadingBox').style.display = 'block';
        generatedCodeContainer.classList.add('hidden');
        generatedCode.value = '';

        const prompt = `Create a complete, single-page HTML website. The website must be fully responsive and use Tailwind CSS for all styling. Use modern, professional colors, fonts, and a clean layout. The content of the website should be based on the following description: "${descriptionInput.value}". Include a title, a hero section, and at least two other distinct sections relevant to the topic. All code, including HTML, CSS (via Tailwind classes), and JavaScript, should be contained within a single file. Do not include any external libraries except for Tailwind CSS.`;

        const payload = {
            contents: [{ parts: [{ text: prompt }] }],
            generationConfig: {
              responseMimeType: "text/plain",
            }
        };

        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
        let retries = 0;
        const maxRetries = 5;
        const retryDelay = 1000;

        const callApiWithExponentialBackoff = async () => {
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    if (response.status === 429 && retries < maxRetries) {
                        const delay = retryDelay * Math.pow(2, retries);
                        console.warn(`Rate limit exceeded. Retrying in ${delay}ms...`);
                        await new Promise(resolve => setTimeout(resolve, delay));
                        retries++;
                        return callApiWithExponentialBackoff();
                    } else {
                        throw new Error(`API call failed with status: ${response.status}`);
                    }
                }

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                    let generatedHtml = result.candidates[0].content.parts[0].text;
                    if (generatedHtml.startsWith('```html')) {
                        generatedHtml = generatedHtml.replace('```html\n', '').replace('```', '');
                    }
                    generatedCode.value = generatedHtml;
                    generatedCodeContainer.classList.remove('hidden');
                } else {
                    generatedCode.value = "Sorry, I couldn't generate the website. Please try again with a different description.";
                    generatedCodeContainer.classList.remove('hidden');
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                generatedCode.value = "Sorry, there was an error. Please try again.";
                generatedCodeContainer.classList.remove('hidden');
            } finally {
                button.innerHTML = originalText;
                button.disabled = false;
                document.getElementById('loadingBox').style.display = 'none';
            }
        };
        callApiWithExponentialBackoff();
    });
</script>

</body>
</html>
